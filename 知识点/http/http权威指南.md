# 缓存
## 缓存的优点
* 减少了冗余数据的传输，节省了你的网络费用
* 缓解了网络瓶颈的问题，不需要更多的带宽就能够更快地加载页面
* 降低了对原始服务器的要求，服务器可以更快的响应，避免过载的出现
* 降低了距离时延，因为从较远的地方加载页面会更慢一些

http提供了几个用来对已缓存对象进行再验证的工具，最常用的是If-Modified-Since首部。将这个首部添加到get请求中，就可以
告诉服务器，只有在缓存了对象的副本之后，又对其进行了修改的情况下，才发送此对象。以下是服务器收到If-Modified-Since请求
时会发生的情况：
1）再验证命中
如果服务器对象未被修改，则服务器会像客户端发送一个小的HTTP 304 not Modified响应
2）再验证未命中
如果服务器对象与已缓存副本不同，服务器会向客户端返回一个HTTP 200 OK的响应
3）对象被删除
如果服务器的对象被删除了，服务器就回送一个404 not found响应，缓存也会将副本删除

缓存命中率：由缓存提供服务的请求所占的比例
文档命中率： 说明阻止老多少外部网络的web事务，事务通常有一个都很大的固定时间成分(比如：建立一条到服务器的Tcp连接)，提高文档
命中率对降低整体时延很有好处。
字节命中率：说明阻止了多少字节传向因特网，提高字节命中率对节省带宽很有利

对缓存再验证来说最有用的2个首部是IF-Modified-Since和IF-None-Match.
IF-Modified-Since: 如果从指定日期之后文档被修改过了，就执行请求的方法。
IF-None-Match：服务器可以为文档提供特殊的标签(Etag)，而不是将其与最近修改日期相匹配，这些标签就像序列号一样。如果
已缓存标签与服务器文档中的标签有所不同，IF-None-Match首部就会执行所请求的方法

2.状态码
100-199  信息性状态码
100    说明收到了请求的初始部分，请客户端继续。发送了这个状态码之后，服务器在收到请求之后必须进行响应。
101    说明服务器正在根据客户端的指定，将协议切换成Update首部所列的协议

200-299   成功状态码
200   请求没有问题，实体的主体部分包含了所请求的资源
201   用于创建服务器对象的请求(比如PUT)。响应的实体主体部分中应该包含各种引用了已创建资源的URL,Location首部包含的则是
        具体的引用
202   请求已被接受，但服务器还未对其执行任何动作
203   实体首部包含的信息不是来自于源端服务器，而是来自资源的一份副本
204   响应报文中包含若干首部和一个状态行，但没有实体的主体部分。主要用于在浏览器不转为显示新文档的情况下，对其进行更新(比如刷新
        一个表单页面)
205   负责告知浏览器清除当前页面中的所有HTML表单元素
206   成功执行了一个部分或Range(范围)请求。

300-399  重定向状态码
300   客户端请求一个实际指向多个资源的URL时会返回这个状态码
301   在请求的URL已被移除时使用。响应的Location首部中应包含资源现在所处的URL
302   与301类似。但是客户端应该使用Location首部给出的URL来临时定位资源。将来的请求仍应使用老的URL
303   告知客户端应该用另一个URL来获取资源。新的URL位于响应报文的Location首部。其主要目的是允许POST请求的响应将客户端定向
      到某个资源上去
304   如果客户端发起了一个条件GET请求，而最近资源未被修改的话，则可以用这个状态码说明资源未被修改。带有这个状态码的响应
      不应该包含实体的主体部分
305   用来说明必须通过一个代理来访问资源，代理的位置由Location首部给出。
307   与301类似。但是客户端应该使用Location首部给出的URL来临时定位资源。将来的请求仍应使用老的URL
302，303比较
HTTP/1.0 客户端发起一个POST请求，并在响应中收到302重定向状态码时，它会接收Location首部的重定向URL,并向那个URL发起一个GET请求(而不会像原始请求中那样发起POST请求)
而HTTP/1.1规范使用303状态码来实现同样的行为。

400-499  客户端错误状态码
400  用于告知客户端它发送了一个错误的请求，请求报文中存在语法错误
401  表示发送的请求需要通过HTTP认证(BASIC认证、DIGIST认证)的认证信息
403  对请求资源的访问被服务器拒绝了。如未获得文件系统的访问授权，访问权限出现某些问题等
404  说明服务器无法找到请求的URL
405  请求中带有所请求的URL不支持的方法时，使用此状态码。应该在响应中包含Allow首部，已告知客户端应对所请求的资源而已使用哪些方法
406  客户端可以指定参数来说明它们愿意接收什么类型的实体
407  与401类似，但要求对资源进行认证的代理服务器
408  如果客户端完成请求所花时间太长，服务器可以回送此状态码，并关闭连接
409  说明请求可能在资源上引发的一些冲突。服务器担心请求会引发冲突时，可以发送此状态码。响应中包含描述冲突的主体
410  与404类似，只是服务器曾经拥有过此资源。主要用于web站点维护，这样服务器的管理者就可以在资源被移除的情况下通知客户端了
411  服务器要求在请求报文中包含Content-Length首部时使用
412  客户端发起了条件请求，且其中一个条件失败了的时候使用。客户端包含了Except首部时发起的请求就是条件请求
413  客户端发送的实体主体部分比服务器能够希望处理的要大时，使用此状态码
414  客户端所发请求中的请求URL比服务器能够或者希望处理的要大时，使用此状态码
415  服务器无法理解或无法支持客户端所发实体的内容类型时，使用此状态码
416  请求报文所请求的是指定资源的某个范围，而此范围无效或无法满足时，使用此状态码
417  请求的Expect请求首部包含了一个期望，但服务器无法满足此期望时，使用此状态码

500-599  服务器错误状态码
500  服务器在执行请求时发生了错误。也有可能是web应用存在但bug或某些临时的故障
501  客户端发起的请求超出服务器的能力范围(比如，使用了服务器不支持的请求方法)
502  作为代理或网关使用的服务器从请求响应链的下一链路上收到了一条伪响应(比如，它无法连接到其父网关)
503  表明服务器暂时处于超负载或正在进行停机维护，现在无法处理请求
504  与状态码408类似，只是这里的响应来自一个网关或代理，它们在等待另一服务器对其请求进行响应时超时了
505  服务器收到的请求使用了它无法或不愿支持的协议版本时，使用此状态码 
